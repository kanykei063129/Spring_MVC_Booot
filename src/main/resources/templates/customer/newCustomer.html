<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="UTF-8">
    <title>New customer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
          crossorigin="anonymous">
    <script>

        function validateForm() {
            var dateOfBirthInput = document.getElementById('dateOfBirth');
            var selectedDate = new Date(dateOfBirthInput.value);
            var today = new Date();
            var minAge = 18;
            var age = today.getFullYear() - selectedDate.getFullYear();
            var monthDiff = today.getMonth() - selectedDate.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < selectedDate.getDate())) {
                age--;
            }
            if (age < minAge) {
                dateOfBirthInput.setCustomValidity('You must be at least 18 years old.');
                dateOfBirthInput.classList.add('is-invalid');
                return false;
            } else {
                dateOfBirthInput.setCustomValidity('');
                dateOfBirthInput.classList.remove('is-invalid');
                return true;
            }
        }
        function validateFormN() {
            var countryCode = document.getElementById("countryCode").value;
            if (countryCode !== "+996") {
                alert("Введите правильный код страны +996");
                return false;
            }
            return true;
        }

        function validateFormE() {
            var email = document.getElementById("email").value;
            var emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/;
            // Проверка адреса электронной почты
            if (!email.match(emailRegex)) {
                alert("Введите правильный адрес электронной почты");
                return false;
            }
            return true;
        }
    </script>
</head>
<body>
<header>
    <nav>
        <div class="container">

            <ul class="menu menu_active">
                <li class="menu_item"><a href="/agencies" class="menu_link"> Agency</a></li>
                <li class="menu_item"><a href="/customers" class="menu_link">  Customer </a></li>
                <li class="menu_item"><a href="houses" class="menu_link"> House  </a></li>
                <li class="menu_item"><a href="#" class="menu_link"> Booking </a></li>
            </ul>

        </div>
        <div class="hamburger hamburger_active">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>
</header>
<section class="promo">
    <div class="container">
        <div class="row">
            <div class="col-md-12 offset-md-0 coll-lg-10
                offset- coll-lg-10">
                <div class="border">
                    <form th:method="POST" th:action="@{saveCustomer}" th:object="${newCustomer}">
                        <div>
                            <label for="firstName">First name</label>
                            <input type="text" th:field="*{firstName}" id="firstName">
                        </div>
                        <div>
                            <label for="lastName">LastName</label>
                            <input type="text" th:field="*{lastName}" id="lastName">
                        </div>
                        <div>
                            <label for="email">Адрес электронной почты:</label>
                            <input type="email" id="email" name="email" required th:field="*{email}" oninput="validateE()">
                            <span id="emailError" style="color: red"></span>

                        </div>
                        <div>
                            <label for="phoneNumber">Phone number</label>
                            <input type="text" id="phoneNumber" pattern="\+996\d{9}"
                                   title="+996 need" required th:field="*{phoneNumber}">
                        </div>
                        <div>
                            <label for="dateOfBirth">Date of birth</label>
                            <input type="date" th:field="*{dateOfBirth}" id="dateOfBirth" oninput="validateForm()">
                        </div>
                        <div>
                            <label for="gender" >Gender</label>
                            <select class="form-select" aria-label="Default select example" th:field="*{gender}" id="gender">
                                <option value="MALE">MALE</option>
                                <option value="FEMALE">FEMALE</option>
                            </select>
                        </div>
                        <button type="submit">Save Customer</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
</html>